#include<iostream>
#include<math.h>
#include <mgl2/mgl.h>
#include <mgl2/qt.h>

using namespace std;

int sample(mglGraph *gr)
{
  gr->SetRanges(0,1,0,1,0,1);
  mglData a(30,40); a.Modify("x*y");
  gr->SubPlot(2,2,0); gr->Rotate(60,40);
  gr->Surf(a);    gr->Box();
  gr->Puts(mglPoint(0.7,1,1.2),"a(x,y)");
  gr->SubPlot(2,2,1); gr->Rotate(60,40);
  a.Diff("x");    gr->Surf(a);  gr->Box();
  gr->Puts(mglPoint(0.7,1,1.2),"da/dx");
  gr->SubPlot(2,2,2); gr->Rotate(60,40);
  a.Integral("xy"); gr->Surf(a);  gr->Box();
  gr->Puts(mglPoint(0.7,1,1.2),"\\int da/dx dxdy");
  gr->SubPlot(2,2,3); gr->Rotate(60,40);
  a.Diff2("y"); gr->Surf(a);  gr->Box();
  gr->Puts(mglPoint(0.7,1,1.2),"\\int {d^2}a/dxdy dx");
  return 0;
}

int main() {

//  /* 1D data */
//	// external array
//	double *a = new double[50];
//	for(int i=0;i<50;i++)   a[i] = sin(M_PI*i/49.);
//
//	mglData y1;
//	y1.Set(a,50);
//
//	// direct array
//	mglData y2(50);
//	for(int i=0;i<50;i++)   y2.a[i] = sin(M_PI*i/49.);
//
//	// textual formula
//  mglData y3(50);
//  y3.Modify("sin(pi*x)");
//
//  mglData y4(50);
//  y4.Fill(0,M_PI);
//  y4.Modify("sin(u)");
//
//
//  // load from file
//  FILE *fp1=fopen("sin.dat","wt");   // create file first
//  for(int i=0;i<50;i++)   fprintf(fp1,"%g\n",sin(M_PI*i/49.));
//  fclose(fp1);
//
//  mglData y5("sin.dat");             // load it
//
//  // load part of file
//  FILE *fp2=fopen("sin.dat","wt");   // create large file first
//  for(int i=0;i<70;i++)   fprintf(fp2,"%g\n",sin(M_PI*i/49.));
//  fclose(fp2);
//
//  mglData y6;
//  y6.Read("sin.dat",50);             // load it
//
//  /* 2D data */
//  mglData z(30,40);
//  for(int i=0;i<30;i++)   for(int j=0;j<40;j++)
//    z.a[i+30*j] = sin(M_PI*i/29.)*sin(M_PI*j/39.);
//
//  mglData z(30,40);
//  z.Modify("sin(pi*x)*cos(pi*y)");
//
//  /* link */
//  double *a = new double[50];
//  for(int i=0;i<50;i++)   a[i] = sin(M_PI*i/49.);
//
//  mglData y;
//  y.Link(a,50);


  mglQT gr(sample,"MathGL examples");
  return gr.Run();
}
